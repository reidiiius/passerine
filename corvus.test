#! /usr/bin/env tclsh

package require tcltest

namespace eval ::Corvus::test {

  namespace import ::tcltest::*

  source estrilda.tcl
  source ploceus.tcl
  source sturnus.tcl

  namespace upvar Estrilda oscines songbirds
  namespace upvar Ploceus machines gears

  variable clefs [array names songbirds]
  variable sign j2k5
  variable crow $songbirds($sign)
  variable harp beadgcf

  test corvus-0.0 {error return} -body {
    error message
  } -returnCodes error -result message

  # estrilda test

  test estrilda-1.0 {normal return} -body {
    string tolower $Estrilda::qualid
  } -returnCodes 0 -result estrilda

  test estrilda-1.1 {normal return} {
    array exists songbirds
  } 1

  test estrilda-1.2 {normal return} {
    string length $crow
  } 60

  test estrilda-1.3 {normal return} {
    string is ascii $crow
  } 1

  test estrilda-1.4 {normal return} {
    string is alnum [Estrilda::signboard]
  } 1

  test estrilda-1.5 {normal return} {
    string is list [Estrilda::signboard $clefs]
  } 1

  test estrilda-1.6 {normal return} {
    string is alnum [Estrilda::research $clefs $sign]
  } 1

  test estrilda-1.7 {normal return} {
    string is list [Estrilda::research $clefs $sign]
  } 1

  # ploceus test

  test ploceus-2.0 {normal return} {
    string is alnum [Ploceus::fingerboard $sign $crow $harp]
  } 1

  puts ""

  test ploceus-2.1 {normal return} {
    string is list [Ploceus::fingerboard $sign $crow $harp]
  } 1

  # sturnus test

  test sturnus-1.0 {normal return} {
     string is list [Sturnus::governor $clefs]
  } 1

  test sturnus-1.1 {normal return} {
     string is alnum [lindex [Sturnus::governor $clefs] end]
  } 1

  test sturnus-1.2 {normal return} {
     string is list [Sturnus::sentinel $clefs]
  } 1

  test sturnus-1.3 {normal return} {
     string is alnum [lindex [Sturnus::sentinel $clefs] end]
  } 1

  test sturnus-1.4 {normal return} {
     string is list [Sturnus::examples $gears]
  } 1

  test sturnus-1.5 {normal return} {
     string is alnum [Sturnus::examples $gears]
  } 1

  puts ""

  cleanupTests
}

namespace delete ::Corvus::test

